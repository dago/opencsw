# Copyright 2009 OpenCSW
# Distributed under the terms of the GNU General Public License v2
# $Id$

# Still doesn't build, I've filed a bug:
# http://code.google.com/p/protobuf/issues/detail?id=166
#
# About using stlport4
# http://developers.sun.com/solaris/articles/cmp_stlport_libCstd.html

GARNAME = protobuf
GARVERSION = 2.3.0
CATEGORIES = lib
DESCRIPTION = encoding structured data in an efficient yet extensible format
define BLURB
	Protocol Buffers are a way of encoding structured data in an efficient yet
	extensible format. Google uses Protocol Buffers for almost all of its
	internal RPC protocols and file formats.
endef
SPKG_SOURCEURL = http://code.google.com/p/protobuf/
MASTER_SITES = $(GOOGLE_MIRROR)
DISTFILES  = $(GARNAME)-$(GARVERSION).tar.gz
UFILES_REGEX = $(GARNAME)-(\d+(?:\.\d+)*).tar.gz
PATCHFILES += 0001-Patches-from-GAR.patch
PATCHFILES += 0002-std-map-in-two-more-files.patch
PATCHFILES += OutputDirectoryIsFileError-unittest.patch
PATCHFILES += trailing-slash-test-fails-on-solaris-8-x86.patch
LICENSE = COPYING.txt
EXTRA_CFLAGS = 
EXTRA_CXXFLAGS = -library=stlport4 -library=no%Cstd
EXTRA_LDFLAGS = -lCrun -lm
BUILD64 = 1
CONFIGURE_ARGS = $(DIRPATHS)
TEST_TARGET = check
RUNTIME_DEP_PKGS_CSWprotobuf += CSWstlport
RUNTIME_DEP_PKGS_CSWprotobuf += CSWzlib
include gar/category.mk
