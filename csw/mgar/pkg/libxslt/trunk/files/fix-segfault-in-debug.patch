diff --speed-large-files --minimal -Nru libxslt-1.1.24.orig/libxslt/extensions.c libxslt-1.1.24/libxslt/extensions.c
--- libxslt-1.1.24.orig/libxslt/extensions.c	2008-05-13 17:36:26.000000000 +0200
+++ libxslt-1.1.24/libxslt/extensions.c	2009-08-16 05:00:34.108691758 +0200
@@ -366,16 +366,17 @@
     /* determine module directory */
     ext_directory = (xmlChar *) getenv("LIBXSLT_PLUGINS_PATH");
 
+    if (NULL == ext_directory) {
+        ext_directory = BAD_CAST LIBXSLT_DEFAULT_PLUGINS_PATH();
+	if (NULL == ext_directory)
+	  return (-1);
+    }
 #ifdef WITH_XSLT_DEBUG_EXTENSIONS
-    xsltGenericDebug(xsltGenericDebugContext,
-                     "LIBXSLT_PLUGINS_PATH is %s\n", ext_directory);
+    else
+      xsltGenericDebug(xsltGenericDebugContext,
+		       "LIBXSLT_PLUGINS_PATH is %s\n", ext_directory);
 #endif
 
-    if (NULL == ext_directory)
-        ext_directory = BAD_CAST LIBXSLT_DEFAULT_PLUGINS_PATH();
-    if (NULL == ext_directory)
-        return (-1);
-
     /* build the module filename, and confirm the module exists */
     xmlStrPrintf((xmlChar *) module_filename, sizeof(module_filename),
                  BAD_CAST "%s/%s%s",
