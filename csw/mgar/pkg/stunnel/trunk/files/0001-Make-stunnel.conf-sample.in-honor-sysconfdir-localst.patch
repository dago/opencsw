From 9873796410fa51fdb686bd5ce72e906bc60280e2 Mon Sep 17 00:00:00 2001
From: Sebastian Kayser <skayser@opencsw.org>
Date: Thu, 29 Jul 2010 00:37:23 +0200
Subject: [PATCH] Make stunnel.conf-sample.in honor --sysconfdir, --localstatedir

In case someone ./configured with a --sysconfdir or --localstatedir
rooted elsewhere than prefix, stunnel.conf-sample.in would have
disregarded it, because it only honors --prefix. This patch
introduces handling for the more specific --sysconfdir/--localstatedir.
---
 tools/stunnel.conf-sample.in |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/tools/stunnel.conf-sample.in b/tools/stunnel.conf-sample.in
index c231eec..201c60f 100644
--- a/tools/stunnel.conf-sample.in
+++ b/tools/stunnel.conf-sample.in
@@ -4,15 +4,15 @@
 ; please read the manual and make sure you understand them
 
 ; certificate/key is needed in server mode and optional in client mode
-cert = @prefix@/etc/stunnel/mail.pem
-;key = @prefix@/etc/stunnel/mail.pem
+cert = @sysconfdir@/stunnel/mail.pem
+;key = @sysconfdir@/stunnel/mail.pem
 
 ; protocol version (all, SSLv2, SSLv3, TLSv1)
 sslVersion = SSLv3
 
 ; security enhancements for UNIX systems - comment them out on Win32
 ; for chroot a copy of some devices and files is needed within the jail
-chroot = @prefix@/var/lib/stunnel/
+chroot = @localstatedir@/lib/stunnel/
 setuid = nobody
 setgid = @DEFAULT_GROUP@
 ; PID is created inside the chroot jail
@@ -33,12 +33,12 @@ socket = r:TCP_NODELAY=1
 ; CApath is located inside chroot jail
 ;CApath = /certs
 ; it's often easier to use CAfile
-;CAfile = @prefix@/etc/stunnel/certs.pem
+;CAfile = @sysconfdir@/stunnel/certs.pem
 ; don't forget to c_rehash CRLpath
 ; CRLpath is located inside chroot jail
 ;CRLpath = /crls
 ; alternatively CRLfile can be used
-;CRLfile = @prefix@/etc/stunnel/crls.pem
+;CRLfile = @sysconfdir@/stunnel/crls.pem
 
 ; debugging stuff (may useful for troubleshooting)
 ;debug = 7
-- 
1.7.1

