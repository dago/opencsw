From 9d63fa77ffd0512d2446741753c57133946fd112 Mon Sep 17 00:00:00 2001
From: Dagobert Michelsen <dam@opencsw.org>
Date: Fri, 14 Jan 2011 15:26:17 +0100
Subject: [PATCH] Use Solaris and CSW layout

---
 Makefile |   23 +++++++++++++----------
 1 files changed, 13 insertions(+), 10 deletions(-)

diff --git a/Makefile b/Makefile
index 8cb0b1b..a2b1274 100644
--- a/Makefile
+++ b/Makefile
@@ -1,26 +1,27 @@
 # $Id: Makefile,v 1.12 2010/12/03 12:49:15 t Exp $
 
 #CFLAGS=-g -I.
-CFLAGS=-O2 -Wall -Wstrict-prototypes -Wuninitialized
+# CFLAGS=-O2 -Wall -Wstrict-prototypes -Wuninitialized
 
 # uncomment for any OS other than Cygwin
 BALANCE=balance
 ROOT=root
-INSTALL=install
-BINDIR=/usr/sbin
-MANDIR=${BINDIR}/../man/man1
+# INSTALL=install
+# BINDIR=/usr/sbin
+# MANDIR=${BINDIR}/../man/man1
 
 # uncomment for Solaris:
-# LIBRARIES=-lsocket -lnsl
-# INSTALL=/usr/ucb/install
-# BINDIR=/usr/local/libexec
+LIBRARIES=-lsocket -lnsl
+INSTALL=/usr/ucb/install
+BINDIR=/opt/csw/sbin
+MANDIR=/opt/csw/share/man/man1
 
 # uncomment for Cygwin:
 # LIBRARIES=-L/usr/local/lib -lcygipc
 # BALANCE=balance.exe
 # ROOT=Administrators
 
-CC=gcc
+# CC=gcc
 RELEASE=3.54
 
 all: balance 
@@ -48,9 +49,11 @@ clean:
 	rm -f $(BALANCE) *.o balance.ps balance.pdf
 
 install:
-	$(INSTALL) -o $(ROOT) -g $(ROOT) -m 755  $(BALANCE) \
+	$(INSTALL) -d $(DESTDIR)$(BINDIR)
+	$(INSTALL) -m 755  $(BALANCE) \
 		$(DESTDIR)$(BINDIR)/$(BALANCE) 
-	$(INSTALL) -o $(ROOT) -g $(ROOT) -m 755  balance.1 \
+	$(INSTALL) -d $(DESTDIR)$(MANDIR)
+	$(INSTALL) -m 755  balance.1 \
 		$(DESTDIR)$(MANDIR) 
 	mkdir -p $(DESTDIR)/var/run/balance
 	chmod 1777 $(DESTDIR)/var/run/balance
-- 
1.7.3.2

