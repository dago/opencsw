From 93c7b9720fa37dc44df91ed7ea26ff5c91ac40cf Mon Sep 17 00:00:00 2001
From: Dagobert Michelsen <dam@opencsw.org>
Date: Tue, 25 May 2010 16:02:44 +0200
Subject: [PATCH] Adjust Makefile for Solaris

---
 Makefile |   21 ++++++++++++---------
 1 files changed, 12 insertions(+), 9 deletions(-)

diff --git a/Makefile b/Makefile
index 05c4ca5..a1ba163 100644
--- a/Makefile
+++ b/Makefile
@@ -1,26 +1,27 @@
 # $Id: Makefile,v 1.9 2010/02/14 18:36:56 t Exp t $
 
 #CFLAGS=-g -I.
-CFLAGS=-O2 -Wall -Wstrict-prototypes -Wuninitialized
+# CFLAGS=-O2 -Wall -Wstrict-prototypes -Wuninitialized
 
 # uncomment for any OS other than Cygwin
 BALANCE=balance
 ROOT=root
 INSTALL=install
-BINDIR=/usr/sbin
-MANDIR=${BINDIR}/../man/man1
+# BINDIR=/usr/sbin
+# MANDIR=${BINDIR}/../man/man1
 
 # uncomment for Solaris:
-# LIBRARIES=-lsocket -lnsl
-# INSTALL=/usr/ucb/install
-# BINDIR=/usr/local/libexec
+LIBRARIES=-lsocket -lnsl
+INSTALL=/usr/ucb/install
+BINDIR=/opt/csw/sbin
+MANDIR=/opt/csw/share/man/man1
 
 # uncomment for Cygwin:
 # LIBRARIES=-L/usr/local/lib -lcygipc
 # BALANCE=balance.exe
 # ROOT=Administrators
 
-CC=gcc
+# CC=gcc
 RELEASE=3.52
 
 all: balance 
@@ -48,9 +49,11 @@ clean:
 	rm -f $(BALANCE) *.o balance.ps balance.pdf
 
 install:
-	$(INSTALL) -o $(ROOT) -g $(ROOT) -m 755  $(BALANCE) \
+	$(INSTALL) -d $(DESTDIR)$(BINDIR)
+	$(INSTALL) -m 755  $(BALANCE) \
 		$(DESTDIR)$(BINDIR)/$(BALANCE) 
-	$(INSTALL) -o $(ROOT) -g $(ROOT) -m 755  balance.1 \
+	$(INSTALL) -d $(DESTDIR)$(MANDIR)
+	$(INSTALL) -m 755  balance.1 \
 		$(DESTDIR)$(MANDIR) 
 	mkdir -p $(DESTDIR)/var/run/balance
 	chmod 1777 $(DESTDIR)/var/run/balance
-- 
1.7.1

