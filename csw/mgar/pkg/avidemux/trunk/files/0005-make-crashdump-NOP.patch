From d7022be6a4b0de461934a3ae6bc1bd1fc6d10aba Mon Sep 17 00:00:00 2001
From: Peter Felecan <pfelecan@opencsw.org>
Date: Sun, 27 Oct 2013 16:26:50 +0100
Subject: [PATCH] make crashdump NOP

---
 avidemux_core/ADM_core/src/ADM_crashdump_unix.cpp | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/avidemux_core/ADM_core/src/ADM_crashdump_unix.cpp b/avidemux_core/ADM_core/src/ADM_crashdump_unix.cpp
index 891325f..e81de25 100644
--- a/avidemux_core/ADM_core/src/ADM_crashdump_unix.cpp
+++ b/avidemux_core/ADM_core/src/ADM_crashdump_unix.cpp
@@ -21,7 +21,9 @@
 #include <unistd.h>
 #include <cxxabi.h>
 #include <signal.h>
+#if !defined(__sun__)
 #include <execinfo.h>
+#endif /* : !defined(__sun__) */
 
 #include "ADM_default.h"
 
@@ -65,6 +67,7 @@ void sig_segfault_handler(int signo)
 
 void ADM_backTrack(const char *info,int lineno,const char *file)
 {
+#if !defined(__sun__)
 	if(mysaveFunction)
 		mysaveFunction();
 
@@ -111,5 +114,9 @@ void ADM_backTrack(const char *info,int lineno,const char *file)
 
 	exit(-1); // _exit(1) ???
 #endif
+#else /* : !defined(__sun__) */
+	  printf("crashed in %s at line %d\n", file, lineno);
+	  printf("crash backtrace not implemented for SUN Solaris!\n");
+#endif /* : !defined(__sun__) */
 }
 //EOF
-- 
1.8.3.4

