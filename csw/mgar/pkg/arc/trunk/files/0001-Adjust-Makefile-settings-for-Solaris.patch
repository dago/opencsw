From 0477e562ed5d6f77e02de98202ac822708eb7a4b Mon Sep 17 00:00:00 2001
From: Maciej Blizinski <maciej@opencsw.org>
Date: Sun, 1 Jun 2014 11:40:16 +0200
Subject: [PATCH] Adjust Makefile settings for Solaris

---
 Makefile |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/Makefile b/Makefile
index c6273d0..4a73a01 100644
--- a/Makefile
+++ b/Makefile
@@ -39,12 +39,12 @@ PROG =
 # (See the Sysvarcstuf shar file)
 #SYSTEM = -DGEMDOS=1 -fstrength-reduce -fomit-frame-pointer -finline-functions -fdefer-pop -mpcrel
 #SYSTEM = -DBSD=1
-SYSTEM = -DSYSV=1
+SYSTEM = -DSYSV=1 -DNEED_ALPHASORT
 
-OPT = -O -Wall
+OPT = $(OPTFLAGS)
 # For MWC 3.0 on the Atari ST, use:
 #CFLAGS = -VCOMPAC -VPEEP
-CFLAGS = $(OPT) $(SYSTEM)
+CFLAGS = $(OPT) $(SYSTEM) $(CPPFLAGS)
 
 # GNU's gcc is very nice, if you've got it. Otherwise just cc.
 #CC = cgcc -mshort -mbaserel
@@ -58,7 +58,7 @@ TMCLOCK = tmclock.o
 
 # Files needed for System V 
 #SYSVOBJ =	getwd.o rename.o scandir.o utimes.o
-SYSVOBJ =
+SYSVOBJ = scandir.o
 
 OBJS = arc.o arcadd.o arccode.o arccvt.o arcdata.o arcdel.o arcdos.o \
 arcext.o arcio.o arclst.o arclzw.o arcmatch.o arcpack.o arcrun.o \
@@ -137,4 +137,4 @@ install: all
 	install -s -m 0755 -D marc $(DESTDIR)$(PREFIX)/bin/marc
 	install -m 0644 -D arc.1 $(DESTDIR)$(PREFIX)/share/man/man1/arc.1
 	install -m 0644 -D marc.1 $(DESTDIR)$(PREFIX)/share/man/man1/marc.1
-	 	
\ No newline at end of file
+	 	
-- 
1.7.10.3

