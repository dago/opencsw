From 9c69a401f3d2fb44b0a09702aff99c9e28b627c4 Mon Sep 17 00:00:00 2001
From: Ben Walton <bwalton@artsci.utoronto.ca>
Date: Fri, 13 Nov 2009 12:01:31 -0500
Subject: [PATCH 1/2] add installation support to Makefile

Signed-off-by: Ben Walton <bwalton@artsci.utoronto.ca>
---
 Makefile |   20 ++++++++++++++++++++
 1 files changed, 20 insertions(+), 0 deletions(-)

diff --git a/Makefile b/Makefile
index 3e97c62..faefffd 100644
--- a/Makefile
+++ b/Makefile
@@ -1,3 +1,13 @@
+prefix ?= /usr/local
+mandir ?= $(prefix)/share/man
+gitdir ?= $(shell git --exec-path)
+
+# this should be set to a 'standard' bsd-type install program
+INSTALL ?= install
+INSTALL_DATA = $(INSTALL) -c -m 0644
+INSTALL_EXE = $(INSTALL) -c -m 0755
+INSTALL_DIR = $(INSTALL) -c -d -m 0755
+
 default:
 	@echo "git-subtree doesn't need to be built."
 	@echo "Just copy it somewhere on your PATH, like /usr/local/bin."
@@ -5,6 +15,16 @@ default:
 	@echo "Try: make doc"
 	@false
 
+install: install-exe install-doc
+
+install-exe: git-subtree.sh
+	$(INSTALL_DIR) $(DESTDIR)/$(gitdir)
+	$(INSTALL_EXE) $< $(DESTDIR)/$(gitdir)/git-subtree
+
+install-doc: git-subtree.1
+	$(INSTALL_DIR) $(DESTDIR)/$(mandir)/man1/
+	$(INSTALL_DATA) $< $(DESTDIR)/$(mandir)/man1/
+
 doc: git-subtree.1
 
 %.1: %.xml
-- 
1.6.5

