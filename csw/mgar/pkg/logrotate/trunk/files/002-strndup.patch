--- logrotate-3.8.0/config.c	Tue Jun 21 08:12:02 2011
+++ logrotate-3.8.0-solfix/config.c	Sun Jun 26 22:54:39 2011
@@ -74,6 +74,29 @@
 
 #endif
 
+#if !defined(strndup)
+char *strndup(const char *s, size_t n)
+{
+	size_t nAvail;
+	char *p;
+	
+	if(!s)
+		return NULL;
+
+	/* min() */
+	nAvail = strlen(s) + 1;
+	if ( (n + 1) < nAvail)
+		nAvail = n + 1;
+
+	p = malloc(nAvail);
+	if (!p)
+		return NULL;
+	memcpy(p, s, nAvail);
+	p[nAvail - 1] = 0;
+	return p;
+}
+#endif
+
 enum {
 	STATE_DEFAULT = 2,
 	STATE_SKIP_LINE = 4,
