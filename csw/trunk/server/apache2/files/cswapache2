#!/sbin/sh
#
# Copyright 2004 Sun Microsystems, Inc.  All rights reserved.
# Use is subject to license terms.
#
# ident    "@(#)http-apache2    1.2    04/11/11 SMI"
#

APACHE_HOME=/opt/csw/apache2
CONF_FILE=$APACHE_HOME/etc/httpd.conf
PIDFILE=$APACHE_HOME/var/run/httpd.pid

[ ! -f ${CONF_FILE} ] &&  exit 1

case "$1" in
start|startssl)
    /bin/rm -f ${PIDFILE}
    /bin/mkdir -p `dirname $PIDFILE`
    cmd=$1
    if [ "$cmd" = "startssl" ]; then
        cmd="start -DSSL"
    fi
    ;;
restart)
    cmd="restart"
    ;;
graceful)
    cmd="graceful"
    ;;
stop)
    cmd="stop"
    if [ ! -x ${APACHE_HOME}/httpd ]; then
        pkill httpd
        exit 0
    fi
    ;;
*)
    echo "Usage: $0 {start|startssl|stop|restart|graceful}"
    exit 1
    ;;
esac

exec ${APACHE_HOME}/sbin/apachectl -k $cmd 2>&1
