GARNAME      = dbus-glib
GARVERSION   = 0.73
CATEGORIES   = libs

DESCRIPTION  = DBus GLib Bindings
define BLURB
This package provides the bindings between GLib and DBus

D-Bus is a message bus system, a simple way for applications to talk to one another. In addition to interprocess communication, D-Bus helps coordinate process lifecycle; it makes it simple and reliable to code a "single instance" application or daemon, and to launch applications and daemons on demand when their services are needed.
endef

MASTER_SITES  = http://dbus.freedesktop.org/releases/dbus-glib/
DISTFILES     = $(GARNAME)-$(GARVERSION).tar.gz 
PKGDIST       = $(GARNAME)-$(GARVERSION).tar.gz 

DISTFILES    += CSWdbusglib.gspec CSWdbusglib.prototype CSWdbusglib.depend
DISTFILES    += CSWdbusglibdevel.gspec CSWdbusglibdevel.prototype CSWdbusglibdevel.depend

CFLAGS       += -xlibmil -errtags=yes -erroff=E_EMPTY_DECLARATION
CXXFLAGS     += -xlibmil -xlibmopt -features=tmplife -norunpath
# CPPFLAGS   += -I$(DESTDIR)/opt/csw/include/xfce4
LDFLAGS      += -L/opt/csw/lib -R/opt/csw/lib

export CFLAGS CXXFLAGS LDFLAGS

include ../category.mk

CPPFLAGS += -I$(DESTDIR)/opt/csw/include/dbus-1.0
CPPFLAGS += -I$(DESTDIR)/opt/csw/lib/dbus-1.0/include

CONFIGURE_ARGS = --prefix=/opt/csw --mandir=/opt/csw/share/man --disable-tests

post-install:
	( gfind $(DESTDIR)/opt/csw -exec bash -c "file {} | grep ELF | grep -e 'executable' -e 'dynamic lib' | grep 'not stripped' && strip {}"  \; )

