diff --speed-large-files --minimal -Nru vsftpd-2.0.4.orig/sysutil.c vsftpd-2.0.4/sysutil.c
--- vsftpd-2.0.4.orig/sysutil.c	2006-04-12 18:45:16.969532000 -0400
+++ vsftpd-2.0.4/sysutil.c	2006-04-12 18:44:48.196361000 -0400
@@ -2475,10 +2475,19 @@
 {
   time_t the_time = 0;
   struct tm* p_tm;
+#if defined (__SVR4) && defined (__sun)
+  struct tm* p_tm_utc;
+#endif
+
   tzset();
   the_time = time(NULL);
   p_tm = localtime(&the_time);
+#if defined (__SVR4) && defined (__sun)
+  p_tm_utc = gmtime(&the_time);
+  s_timezone = -(mktime(p_tm) - mktime(p_tm_utc));
+#else
   s_timezone = -p_tm->tm_gmtoff;
+#endif
 }
 
 const char*
