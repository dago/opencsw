--- httpd-2.2.4/srclib/apr/configure.orig	2007-01-06 01:39:14.000000000 -0500
+++ httpd-2.2.4/srclib/apr/configure	2007-01-31 22:07:19.000000000 -0500
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /bin/bash
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.59.
 #
@@ -85,7 +85,7 @@
 
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
@@ -243,7 +243,7 @@
 
 
 # Check that we are running under the correct shell.
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/bin/bash}
 
 case X$ECHO in
 X*--fallback-echo)
@@ -328,7 +328,7 @@
     elif (test -f /bin/ksh || test -f /bin/ksh$ac_exeext) &&
 	 test "X$CONFIG_SHELL" != X/bin/ksh; then
       # If we have ksh, try running configure again with it.
-      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
+      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/bash}
       export ORIGINAL_CONFIG_SHELL
       CONFIG_SHELL=/bin/ksh
       export CONFIG_SHELL
@@ -370,7 +370,7 @@
 	if test "$prev" != 'sed 50q "$0"'; then
 	  echo_test_string=`eval $prev`
 	  export echo_test_string
-	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "$0" ${1+"$@"}
+	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/bash}} "$0" ${1+"$@"}
 	else
 	  # Oops.  We lost completely, so just stick with echo.
 	  echo=echo
@@ -411,7 +411,7 @@
 subdirs=
 MFLAGS=
 MAKEFLAGS=
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/bin/bash}
 
 # Maximum number of lines to put in a shell here document.
 # This variable seems obsolete.  It should probably be removed, and
@@ -2168,7 +2168,7 @@
 
   rm -f config.nice
   cat >config.nice<<EOF
-#! /bin/sh
+#! /bin/bash
 #
 # Created by configure
 
@@ -4931,8 +4931,8 @@
 
 
   if test -z "$apr_lock_method"; then
-    test "x$silent" != "xyes" && echo "  setting apr_lock_method to \"USE_FCNTL_SERIALIZE\""
-    apr_lock_method="USE_FCNTL_SERIALIZE"
+    test "x$silent" != "xyes" && echo "  setting apr_lock_method to \"USE_SYSVSEM_SERIALIZE\""
+    apr_lock_method="USE_SYSVSEM_SERIALIZE"
   fi
 
 	;;
@@ -5726,8 +5726,8 @@
   fi
 
 
-  test "x$silent" != "xyes" && echo "  forcing SHELL to \"/bin/sh5\""
-  SHELL="/bin/sh5"
+  test "x$silent" != "xyes" && echo "  forcing SHELL to \"/bin/bash5\""
+  SHELL="/bin/bash5"
 
 	;;
     *powerpc-tenon-machten*)
@@ -9828,7 +9828,7 @@
     # If test is not a shell built-in, we'll probably end up computing a
     # maximum length that is only half of the actual maximum length, but
     # we can't tell.
-    SHELL=${SHELL-${CONFIG_SHELL-/bin/sh}}
+    SHELL=${SHELL-${CONFIG_SHELL-/bin/bash}}
     while (test "X"`$SHELL $0 --fallback-echo "X$teststring" 2>/dev/null` \
 	       = "XX$teststring") >/dev/null 2>&1 &&
 	    new_result=`expr "X$teststring" : ".*" 2>&1` &&
@@ -43782,7 +43782,7 @@
 
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
