diff --speed-large-files --minimal -Nru xchat-2.8.2.orig/src/common/modes.c xchat-2.8.2/src/common/modes.c
--- xchat-2.8.2.orig/src/common/modes.c	2006-10-25 00:18:07.000000000 -0400
+++ xchat-2.8.2/src/common/modes.c	2007-04-29 14:12:41.862417000 -0400
@@ -26,6 +26,7 @@
 #include "server.h"
 #include "text.h"
 #include "fe.h"
+#include "inbound.h"
 #include "util.h"
 #ifdef HAVE_STRINGS_H
 #include <strings.h>
diff --speed-large-files --minimal -Nru xchat-2.8.2.orig/src/common/msproxy.h xchat-2.8.2/src/common/msproxy.h
--- xchat-2.8.2.orig/src/common/msproxy.h	2006-04-16 11:32:17.000000000 -0400
+++ xchat-2.8.2/src/common/msproxy.h	2007-04-29 14:13:11.837042000 -0400
@@ -120,7 +120,7 @@
 			char			pad50[6];			/* 211-216						*/
 			guint16			magic55;				/* 217-218: 0x30, 0x00					*/
 			char			pad55[2];			/* 219-220						*/
-			char			data[0];			/* Dummy end marker, no real data required		*/
+			char			*data;			/* Dummy end marker, no real data required		*/
 		} auth;
 
 		struct {
@@ -180,7 +180,7 @@
 			guint16			boundport;			/* 77-78: bind request; port used on client behalf.	*/
 			guint32			boundaddr;			/* 79-82: addr used on client behalf			*/
 			char			pad30[90];			/* 83-172						*/
-			char			data[0];			/* End marker						*/
+			char			*data;			/* End marker						*/
 		} connack;
 
 	} packet;
